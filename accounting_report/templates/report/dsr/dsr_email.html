{% load custom_tags %}
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <style>
            .table th, td{
             
              padding: 3px!important;
              font-size: 13px!important;
             

            }
          </style>
    </head>

    <body>
        <strong>Hello, </strong> {{first_data.job.account_address.party.party_name}}
        
        <br>
        
        <strong>CURRENT STATUS OF YOUR SHIPMENT</strong>
        
        <br>
        
        
        
        <div class="table-responsive">
            <table border="1px solid black" class="table compact display table-primary table-bordered " id="dsr_table">
                <thead>
                  <tr>
                    <th>INV.&nbsp;NO.</th>
                    <th>CONSIGNEE</th>
                    <th>DESTINATION</th>
                    <th>CONTAINER&nbsp;NO.</th>
                    <th>DRY/REEFER</th>
                    <th>BOOKING&nbsp;NO.</th>
                    <th>P.O.L</th>
                    <th>LINE</th>
                    <th>FORWADER</th>
                    <th>STUFFING&nbsp;DATE</th>
                    <th>ICD&nbsp;IN&nbsp;DATE</th>
                    <th>HANDOVER&nbsp;DATE</th>
                    <th>TR&nbsp;HANDOVER</th>
                    <th>RAIL&nbsp;OUT&nbsp;DATE</th>
                    <th>ARRIVAL&nbsp;DATE</th>
                    <th>SAILING&nbsp;DATE</th>
                    <th>DESTINATION&nbsp;ETA</th>
                    <th>VESSEL&nbsp;&&nbsp;VOYAGE</th>
                    <th>ARRIVAL&nbsp;TRANSIT&nbsp;PORT</th>
                    <th>TRANSIT&nbsp;PORT</th>
                    <th>TRANSIT&nbsp;VESSEL&nbsp;&&nbsp;VOYAGE</th>
                    <th>TRANSIT&nbsp;SAILING&nbsp;DATE</th>
                    <th>2nd&nbsp;ARRIVAL&nbsp;TRANSIT&nbsp;PORT&nbsp;</th>
                    <th>2nd&nbsp;TRANSIT</th>
                    <th>VESSEL&nbsp;&&nbsp;VOYAGE	</th>
                    <th>SAILING&nbsp;DATE</th>
                    <th>E.T.A.&nbsp;DATE</th>
                    <th>TRANSIT&nbsp;DAYS</th>
                    <th>REMARKS</th>
                 
                
                  </tr>
                </thead>
                <tbody class="text-center">
                {% for data in data %}
                {% if data.job_container.count > 0 %}
                  <tr>
                    <th scope="row">
                      <input type="hidden" value="{{data.id}}" id="dsr_{{forloop.counter}}" name="dsr_{{forloop.counter}}">
                      
                      {% for invoice in data.job_invoice.all %}
                      {{invoice.invoice_no}},
                      {% endfor %}
                    
                      
                    </th>
                    
                    
            
                    <td>
                      {% if data.consignee.party_name %}
                        {{data.consignee.party_name}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.port_of_discharge %}
                        {{data.port_of_discharge}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% for container in data.job_container.all %}
                      {{container.job_container_no}}, 
                      {% endfor %}
                    </td>
                    <td>
                      {% if data.job_container.first.container_mode %}
                        {{data.job_container.first.container_mode}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.booking_no %}
                      {{data.booking_no}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if  data.port_of_loading  %}
                        {{ data.port_of_loading }}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.shipping_line.short_name %}
                        {{data.shipping_line.short_name}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.forwarder %}
                        {{data.forwarder}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.stuffing_date %}
                        {{data.stuffing_date}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.icd_gate_in %}
                        {{data.icd_gate_in}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.icd_handover %}
                        {{data.icd_handover}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% if data.tr_date %}
                        {{data.tr_date}}
                      {% else %}
                      --
                      {% endif %}
                    </td>
                    <td>
                      {% for container in data.job_container.all %}
                      {% if 'r_date'|getTrackingData:container.id %}
                      {{'r_date'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                      </td>
                    <td>
                      {% for container in data.job_container.all %}
                      {% if 'arrival_date'|getTrackingData:container.id %}
                      {{'arrival_date'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                    </td>
                    <td>
                      {% for container in data.job_container.all %}
                      {% if 'sailing_date'|getTrackingData:container.id %}
                      {{'sailing_date'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                    </td>
                   
                    <td> 
                      {% for container in data.job_container.all %}
                      {% if 'arrival'|getTrackingData:container.id %}
                      {{'arrival'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                    </td>
                    
                    <td> 
                      {% for container in data.job_container.all %}
                      {% if 'vessel'|getTrackingData:container.id %}
                      {{'vessel'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}	
                    </td>
                    
                    <td>
                      {% for container in data.job_container.all %}
                      {% if 'trans_port_arrival'|getTrackingData:container.id %}
                      {{'trans_port_arrival'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                    </td>
                    <td>  
                      {% for container in data.job_container.all %}
                      {% if 'trans_port'|getTrackingData:container.id %}
                      {{'trans_port'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                      </td>
                    <td>  
                      {% for container in data.job_container.all %}
                      {% if 'trans_vessel'|getTrackingData:container.id %}
                      {{'trans_vessel'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                        </td>
                    <td> 
                      {% for container in data.job_container.all %}
                      {% if 'trans_sailing_date'|getTrackingData:container.id %}
                      {{'trans_sailing_date'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}	
                    </td>
                    <td> 
                      {% for container in data.job_container.all %}
                      {% if 'trans2_port_arrival'|getTrackingData:container.id %}
                      {{'trans2_port_arrival'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}  
                    </td>
                    <td>
                      {% for container in data.job_container.all %}
                      {% if 'trans2_port'|getTrackingData:container.id %}
                      {{'trans2_port'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}  
                      
                    </td>
                    <td> 
                      {% for container in data.job_container.all %}
                      {% if 'trans2_vessel'|getTrackingData:container.id %}
                      {{'trans2_vessel'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}  
                    </td>
                    <td> 
            
                      {% for container in data.job_container.all %}
                      {% if 'trans2_sailing_date'|getTrackingData:container.id %}
                      {{'trans2_sailing_date'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}	
            
                    </td>
                    <td>
                       {% for container in data.job_container.all %}
                      {% if 'arrival'|getTrackingData:container.id %}
                      {{'arrival'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                        </td>
                    <td>
                       {% for container in data.job_container.all %}
                      {% if 'transit_days'|getTrackingData:container.id %}
                      {{'transit_days'|getTrackingData:container.id}}, 
                      {% endif %}
                      {% endfor %}
                     </td>
                    <td> {{data.icd_remarks}}</td>
                      
                  </tr>
            
                  {% endif %}
                  {% endfor %}
                 
                </tbody>
              </table>
            
            </div>
             
    </body>
</html>