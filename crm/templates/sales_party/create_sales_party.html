{% extends 'dashboard/index.html' %}
{% block dashoard_title %} 

{% if update %}
Update Event |
{% else %}
Create Event |
{% endif %}

{% endblock %} 
{% block dashboard_heading %}
<div><h1 class="h4 mb-0 text-gray-800">
    {% if update %}
    Update Party
    {% else %}
    Create New Party
    {% endif %}

</h1></div>

<div class="text-danger">This party form is only for <strong>Sales Planner Purpose</strong>, not for Operations & Accounting</div>

<a href="{% url 'crm:sales_party_details' module=module %}" class="d-inline-block btn  btn-primary shadow-sm"><i
        class="fas fa-eye  text-white-50"></i> View List</a>
{% endblock %}


{% block dashboard_content %}

<input type="hidden" id="user_type" value="{{request.user.is_staff}}">
<form enctype="multipart/form-data" method="post">
    {% csrf_token %}
    {% include 'error_component.html' %}
  
    <div class="row">

        <!-- {% if request.user.user_account.create_global_data %}
        <div class="col-md-3 col-sm-12 mb-1" id="company_div">
            <label for="id_company_type" class="required" >Choose Company</label>
            {{ form.company_type }}
        </div>
        {% else %}
            <input type="hidden" name="id_company_type" id="id_company_type" value="{{ request.user.user_account.office.id }}">
        {% endif %}


        {% if request.user.is_staff %}
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_user" class="required" >Assigned To</label>
            {{ form.user }}
        </div>
        {% endif %} -->
        
      

        
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_party_name" class="required" >Party Name</label>
            {{ form.party_name }}
        </div>
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_party_short" class="required" >Party Short Name</label>
            {{ form.party_short }}
        </div>
        
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_contact_person" class="required" >Contact Person</label>
            {{ form.contact_person }}
        </div>
        
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_contact_number" class="required" >Contact Number</label>
            {{ form.contact_number }}
        </div>
        
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_contact_email" class="required" >contact Email</label>
            {{ form.contact_email }}
        </div>
        
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_states" class="required" >States</label>
            {{ form.states }}
        </div>
        <div class="col-md-9 col-sm-12 mb-3">
            
        </div>

        <div class="col-md-12 mt-2 mb-2 text-danger" >Kindly fill all the three columns of Address</div>

        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_address" class="required" >Address</label>
            {{ form.address1 }}
        </div>
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_address"  style=" visibility: hidden;"class="required" >Address</label>
            {{ form.address2 }}
        </div>
        <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_address"  style=" visibility: hidden;"class="required" >Address</label>
           
            {{ form.address3 }}
        </div>




        <!-- <div class="col-md-3 col-sm-12 mb-3">
            <label for="id_customer" class="required" >Customer</label>
            {{ form.customer }}
        </div> -->

        
       
     
        

        

    </div>

    <button type="submit" class="btn btn-primary">
        {% if update %}
        <input type="hidden" id="is_update" value="true">
        Update Event
        {% else %}
        <input type="hidden" id="is_update" value="false">
        Submit
        {% endif %}

    </button>
</form>



{% endblock %}
{% block js %}
<script>
    const userType = document.getElementById('user_type').value
    const update = document.getElementById('is_update').value
    if(userType != "True"){
        document.getElementById('id_manager_remarks').readOnly = 1
    }else{
        document.getElementById('id_remarks').readOnly = 1
    }
    if(update == "true"){
        document.getElementById('id_user').readOnly = true;
        document.getElementById('id_title').readOnly = true;
        document.getElementById('company_div').style.display = 'none';
    }
   
</script>
{% endblock %}