{% load mathfilters %}
{% load custom_tags %}
{% load humanize %}

<html>

<head>
    <title>Non-Tax Invoice - {{data.final_invoice_no}}</title>

    <style>
        * {
            margin-bottom: 0px !important;
            margin-top: 0px !important;
        }

        .align-right {
            text-align: right !important;
        }

        div {
            font-size: 11px !important;
            line-height: 4px;
        }

        .border-right-r {
            border: 0.5px solid black;
            border-top: none;
            border-right: none;
            border-collapse: collapse;
        }

        @page {
            size: a4 portrait;
            border: 1px solid black;

            @frame header_frame {
                /* Static Frame */
                -pdf-frame-content: header_content;
                left: 10pt;
                right: 10pt;
                top: 40pt;
                height: 80pt;
            }

            @frame content_frame {
                /* Content Frame */
                left: 10pt;
                right: 10pt;
                top: 120pt;
                height: 510pt;
                border-bottom: none !important;
            }

            @frame footer_frame {
                /* Another static Frame */
                -pdf-frame-content: footer_content;
                left: 10pt;
                right: 10pt;
                top: 630pt;
                height: 170pt;
                bottom: 20pt;
                border-top: 0px!important;
                padding: 2px;
            }
        }

    </style>
</head>

<body>

    
    <div id="header_content">
        <table style="border-top:1px solid black; " >
            <tr style="font-size: 16px;">
                <td style="width:85%; border-left:1px solid black;" > <img width="100%" height="auto" src="{{ head.letter_head.url }}" alt="" /></td>
                <td align="left"  style="width:15%"> 
                   
                    <h1 style="text-align: center; font-size: 50px!important; text-decoration: underline;">INVOICE</h1>
                
                </td>
            </tr>
        </table>
       
    </div>

    

    <table border="0.5px" style="padding:2px;">
        <tr>
            <td rowspan="2" style="text-align:left;vertical-align:top;padding:2px;width: 40%;">
                <div><strong>Invoice To: </strong></div>
                <div>{{data.bill_to.party_name}}</div>
                <div>{{data.bill_to_address.corp_address_line1}}</div>
                <div>{{data.bill_to_address.corp_address_line2}}</div>
                <div>{{data.bill_to_address.corp_address_line3}}</div>

                
            </td>

            <td style="text-align:left;vertical-align:top;padding:2px; width: 40%;">

                <div><strong>Bill No.</strong> &nbsp; {{data.invoice_no}}</div>

                
                
                
            </td>
            <td style="text-align:left;vertical-align:top;padding:2px; width: 20%;">
                {% if data.is_einvoiced and data.einvoice_date %}
               
                <div><strong>Date</strong> &nbsp; {{data.einvoice_date|date:'M-d-Y' }}</div>
                {% else %}
                <div><strong>Date</strong> &nbsp; {{data.date_of_invoice|date:'M-d-Y' }}</div>
                {% endif %}
                
            </td>

           
        </tr>
        <tr>
            
            <td style="text-align:left;vertical-align:top;padding:2px; width: 40%;">

                <div><strong>MASTER B/L NO.</strong> &nbsp; {{ data.job_no.mbl_no }}</div>

            </td>
            <td style="text-align:left;vertical-align:top;padding:2px; width: 20%;">
                <div><strong>Due Date</strong> &nbsp; {{data.due_date|date:'M-d-Y' }}</div>
            </td>
        </tr>

       <!-- Shipper -->
        <tr>
            <td rowspan="2" style="text-align:left;vertical-align:top;padding:2px;width: 50%;">
                <div><strong>SHIPPER: </strong></div>
                <div>{{data.shipper.party_name}}</div>
                <div>{{data.shipper_address.corp_address_line1}}</div>
                <div>{{data.shipper_address.corp_address_line2}}</div>
                <div>{{data.shipper_address.corp_address_line3}}</div>
            </td>
            <td colspan="2" style="text-align:left;vertical-align:top;padding:2px; width: 30%;">

                <div><strong>H.B/L NO</strong> &nbsp; 
                    {% if data.job_no.mbl_job.all|length > 0  %}
                    {% for i in data.job_no.mbl_job.all %}
                    {{i.mbl_no}}, 
                    {% endfor %}
                    {%  else %}
                    {{data.job_no.hbl_no}}
                    {% endif %}
                </div>
            </td>
           
        </tr>
        <tr>
            
            <td colspan="2" style="text-align:left;vertical-align:top;padding:2px; width: 30%;">

                <div><strong>VESSEL & VOY NO.</strong> &nbsp; {{data.job_no.vessel_voy_name}}</div>

            </td>
           
        </tr>

       <!-- CONSIGNEE -->
        <tr>
            <td rowspan="2" style="text-align:left;vertical-align:top;padding:2px;width: 40%;">
                <div><strong>CONSIGNEE: </strong></div>
                <div>{{data.job_no.consignee.party_name}}</div>
            </td>

            <td  style="text-align:left;vertical-align:top;padding:2px; width: 40%;">
                <div><strong>PORT OF LOADING</strong> &nbsp; {{data.job_no.port_of_loading.name}}</div>
            </td>
            <td  style="text-align:left;vertical-align:top;padding:2px; width: 20%;">
                <div><strong>ETD</strong> &nbsp; {{data.job_no.etd_date}}</div>

            </td>
           
        </tr>
        <tr>
            
            <td  style="text-align:left;vertical-align:top;padding:2px; width: 40%;">

                <div><strong>PORT OF DISCHARGE</strong> &nbsp; {{data.job_no.port_of_discharge.name}}</div>

            </td>
            <td  style="text-align:left;vertical-align:top;padding:2px; width: 20%;">

                <div><strong>ETA</strong> &nbsp; {{data.job_no.fpod_date}}</div>

            </td>
           
        </tr>


       <!-- Notify Party -->
        <tr>
            <td rowspan="2" style="text-align:left;vertical-align:top;padding:2px;width: 40%;">
                <div><strong>NOTIFY PARTY: </strong></div>
                <div>{{data.job_no.notify_party.party_name}}</div>
            </td>

            <td colspan="2" style="text-align:left;vertical-align:top;padding:2px; width: 40%;">
                <div><strong>FINAL DESTINATION</strong> &nbsp; {{data.job_no.final_destination.name}}</div>
            </td>
            
           
        </tr>
        <tr>
            
            <td colspan="2" style="text-align:left;vertical-align:top;padding:2px; width: 40%;">

                <div><strong>SHIPPER INVOICE NO.</strong> &nbsp; {{data.job_no.job_invoice.first.invoice_no}} </div>

            </td>
            
           
        </tr>

       

     


    </table>



    <table style="padding-top:1px; border-collapse:collapse; padding-left:1px; padding-bottom:0px; ">
        <tr style="border: 0.3px solid black; font-size: 10px;">
            <th style="width: 50px; ">Sr. No.</th>
            <th style="width: 400px;">Description</th>
            <th style="width: 50px;">Rate</th>
            <th style="width: 60px;">QTY</th>
            <th style="width: 40px;">Curr</th>
            <th style="width: 50px;">Exc Rate</th>
      
        
            <th  >Amount in {{data.invoice_currency}}</th>
        </tr>
       
        {% for head in data.recievable_invoice_reference.all %}
        <tr style="border: 0.3px solid black; border-bottom:none; border-top:none; font-size: 10px;">
            <td>{{forloop.counter}}</td>
            <td>{{head.billing_head.billing_head}}</td>
            <td  class="align-right">{{head.rate|floatformat:2}}</td>
            <td align="center"  class="align-center">{{head.qty_unit}}</td>
            <td align="center" class="align-center">{{head.currency}}</td>
            <td align="center" class="align-center">{{head.ex_rate}}</td>
           
 
           
            

            <td align="right" >{{head.total|floatformat:2|intcomma}}</td>
        </tr>
        {% endfor %}



        {% for value in blank %}

        <tr style="border: 0.3px solid black; border-bottom:none; border-top:none; font-size: 6px;">
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>

        
            <td>&nbsp;</td>
           
            <td>&nbsp;</td>
        </tr>

        {% endfor %}
      
       
       
      
        <tr align="center" style="border: 0.5px solid black; padding-top:5px!important;  border-left:none; font-size: 8px;">
           
            <td align="center" colspan="6"><strong><h1>*** TOTAL INVOICE AMOUNT IN {{data.invoice_currency.short_name}} *** </h1> </strong></td>
            <td align="right" colspan="1"><strong><h1> {{data.net_amount|floatformat:2|intcomma}}</h1></strong></td>
            
        </tr>
        <tr style="border: 0.5px solid black; padding-top:5px!important;  border-left:none; font-size: 8px;">
           
            <td  colspan="7"><h1><strong></strong>AMOUNT IN {{data.invoice_currency.short_name}} :</strong> {{ data.net_amount|floatformat:0 |num_to_text }}</h1></td>
          
            
        </tr>
        <tr style="border: 0.5px solid black; padding-top:5px!important;  border-left:none;  border-bottom:none; font-size: 8px;">
           
            <td  colspan="7"><strong>CONTAINER NO. :</strong>
            {% for i in data.job_no.job_container.all %}
            {{i.job_container_no}}/{{i.container_type}},
            {% endfor %}
            </td>
          
            
        </tr>


    </table>


    <div id="footer_content">
       
        <div style="position:relative">
            
            <div style="display: flex; flex-direction: row;">
                <table>
                    <tr>
                        <td style="width:100%">
                            <br>
                            {{data.company_type.terms_and_conditions|safe}}</td>
                            <!-- 
                        <td align="top"  style="width:10%">
                            <h6 class="" style="font-size: 11px; margin-bottom:30px!important; text-align:right; font-weight:bold;">
                                {{data.company_type.for_company}}
                            </h6>
                            <br />
                            <br />
                            <h6 style="font-size: 11px; padding-top: 30px!important; text-align:right; font-weight:bold;">Auth. Sign.</h6>
                        </td>
                    -->
                    </tr>
                </table>

            </div>
            
        </div>
   
    </div>

</body>

</html>